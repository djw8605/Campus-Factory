#!/usr/bin/python
import sys
from optparse import OptionParser
import logging

from  campus_factory.Factory import *



def AddArgs(parser):
    parser.add_option(	"-d", "--daemonize", dest="daemonize", help="Daemonize the factory", 
                        action="store_true", default="true")
    
    parser.add_option(	"-c", "--config", dest="config", 
                        help="Location of configuration file", 
                        action="store", default="/etc/campus_factory/campus_factory.conf")

def ParseArgs():
    parser = OptionParser()
    AddArgs(parser)
    (options, args) = parser.parse_args()
    return options, args


if __name__ == "__main__":
    options, args = ParseArgs()
    new_factory = Factory(options)
    if len(args) > 0:
        if args[0] == "restart":
    	    new_factory.Restart()
        elif args[0] == "stop":
    	    new_factory.Stop()
        else:
            print "Unknown argument %s" % args[0]
    else:
        new_factory.Start()



